---
import Layout from "./Layout.astro";
import References from '@components/References.astro';
import Sns from '@components/Sns.astro';
function getIsUrl(pathname) {
  return Astro.url.pathname === pathname;
}

function getIsUrlStartsWith(pathnameStart) {
  return Astro.url.pathname.startsWith(pathnameStart);
}
const { frontmatter } = Astro.props;
const siteUrl = Astro.site?.toString().replace(/\/$/, "") ?? "";
const url = new URL(Astro.url.pathname, siteUrl);
const enURL = new URL(Astro.url.pathname, 'https://en.naomina121.com');
---

<Layout frontmatter={frontmatter}>
    <h1>{frontmatter.pageTitle}</h1>
<ul class="tags mb-0 flex flex-wrap gap-2 my-0 w-full justify-end">
  {frontmatter.tags.map((item: string) => (
    <li>
      <a class="tag" href={`/tags/${item}`}>#{item}</a>
    </li>
  ))}

  <li class="mb-2 text-sm">
    ğŸ“°ä½œæˆæ—¥: <time datetime={`${frontmatter.pubDate}T00:00:00+09:00`}>{frontmatter.pubDate.toString().slice(0,10)}</time>
  </li>

  {frontmatter.modDate && (
    <li class="mb-2 text-sm">
      âœï¸æœ€çµ‚æ›´æ–°æ—¥: <time datetime={`${frontmatter.modDate}T00:00:00+09:00`}>{frontmatter.modDate.toString().slice(0,10)}</time>
    </li>
  )}

  {getIsUrlStartsWith("/podcast/") || getIsUrlStartsWith("/materials/") ? null : (
    frontmatter.githubUrl ? (
      <>
        <li>
          <a class="underline text-sm mb-2 link hover:no-underline" target="_blank" href={frontmatter.githubUrl}>(GitHub Source)</a>
        </li>
        <li>
          ja / <a style="color:gold;" class="underline text-sm mb-2 hover:no-underline" href={enURL.toString()}>en</a>
        </li>
      </>
    ) : (
      <li>
        ja / <a style="color:gold;" class="underline text-sm mb-2 hover:no-underline" href={enURL.toString()}>en</a>
      </li>
    )
  )}
</ul>
    <p class="mt-0 mb-6 text-right text-sm">ğŸ“–è‘—è€…: {frontmatter.author}</p>
    {getIsUrl("/podcast/") ||  getIsUrlStartsWith("/about/") || getIsUrlStartsWith("/podcast/") ? null :frontmatter.image ? <img src={frontmatter.image.url} class="w-full max-w-[820px] max-h-[500px] object-cover" alt={frontmatter.image.alt} /> : null}
{getIsUrlStartsWith("/podcast/") ? null : !getIsUrl("/about/") || !getIsUrlStartsWith("/about/") ? null : <div class="timeCount my-6">
    <span class="timeCountTitle">
    ğŸ“– èª­äº†æ™‚é–“ç›®å®‰ï¼š
    </span>
    <span class="timeCountSpan">
        ã“ã®è¨˜äº‹ã¯èª­ã‚€ã®ã«ç´„ <span class="bold">{frontmatter.minutesRead}</span> ã‹ã‹ã‚Šã¾ã™ã€‚
    </span>
    </div>
  }
    <slot />
    {frontmatter.referrals && <References references={frontmatter.referrals} />}
    {!getIsUrlStartsWith("/materials/") && (
    <Sns frontmatter={frontmatter} url={url} />
    )}
</Layout>